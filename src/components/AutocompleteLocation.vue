<template>
  <div>
     <div id="map"></div>
    <div id="geocoder" class="geocoder"></div>
    
  </div>
</template>
<script>
import Mapbox from "mapbox-gl";
import MapboxGeocoder from "@mapbox/mapbox-gl-geocoder";
export default {
  created() {
    this.mapbox = Mapbox;
  },
  mounted() {
    this.initmap();
  },
  data() {
    return {
      loading: false,
      accessToken: process.env.VUE_APP_MAPBOX_TOKEN,
      mapStyle: "mapbox://styles/mapbox/outdoors-v11",
      center: [11.504929555178624, 3.8465173382452815], // Lng,Lat
      zoom: 5,
    };
  },
  methods: {
    initmap() {
      let mapboxgl = this.mapbox; 
      mapboxgl.accessToken = this.accessToken;

      var map = new mapboxgl.Map({
        container: "map",
        style: this.mapStyle,
        zoom: this.zoom,
        center: this.center,
      });


      const geocoder = new MapboxGeocoder({
        accessToken: mapboxgl.accessToken,
        types: "country,region,place,postcode,locality,neighborhood",
      });
      geocoder.addTo("#geocoder");
      geocoder.on("result", (e) => {
        console.log(e.result);
      });
    },




  },
};
</script>

<style scoped>
@import url("https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css");
@import url("https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.css");
#geocoder {
  z-index: 1;
  /* margin: 20px; */
}
.mapboxgl-ctrl-geocoder {
  min-width: 100%;
}
body {
  margin: 0;
  padding: 0;
}
#map {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 100%;
}
</style>
